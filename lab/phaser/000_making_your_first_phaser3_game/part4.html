<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Making your first Phaser 3 Game - Part 4</title>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.11.0/dist/phaser.js"></script>
    <style type="text/css">
      body {
        margin: 0;
      }
    </style>
  </head>
  <body>
    <script type="text/javascript">
      var config = {
        type: Phaser.AUTO,
        width: 800,
        height: 600,
        physics: {
          default: "arcade",
          arcade: {
            gravity: { y: 300 },
            debug: false,
          },
        },
        scene: {
          preload: preload,
          create: create,
          update: update,
        },
      };

      var platforms;

      var game = new Phaser.Game(config);

      function preload() {
        this.load.image("sky", "assets/sky.png");
        this.load.image("ground", "assets/platform.png");
        this.load.image("star", "assets/star.png");
        this.load.image("bomb", "assets/bomb.png");
        this.load.spritesheet("dude", "assets/dude.png", { frameWidth: 32, frameHeight: 48 });
      }

      function create() {
        this.add.image(400, 300, "sky");

        // 새 Static Physics Group을 생성함
        // Arcade physics에는 두 가지그룹이 있음
        // 1. Dynamic : 속도나 가속도에 의해 움직일 수 있는 것 (튀거나 다른 물체와 충돌할 수 있으며, 중력에 반응함)
        // 2. Static : 움직이지 않는 것 (위치와 크기만을 가지고, 중력의 영향을 받지 않으며 다른 물체와 충돌할 수 있으나 움직이진 않음)
        // Group? : 여러 개의 Game Object를 하나로 묶어서 관리할 수 있음
        const platforms = this.physics.add.staticGroup();
        // setScale(2) : 이미지의 크기를 2배로 확대함
        // refreshBody() : 이미지의 크기가 변경되었으므로, 이미지의 body를 업데이트함
        platforms.create(400, 568, "ground").setScale(2).refreshBody();
        platforms.create(600, 400, "ground");
        platforms.create(50, 250, "ground");
        platforms.create(750, 220, "ground");
      }

      function update() {}
    </script>
  </body>
</html>

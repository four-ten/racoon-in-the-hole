<!DOCTYPE html>
<html lang="ko">
<head>
    <title>캐릭터 움직임 구현</title>
    <style>
        #game-board {
            width: 600px;
            height: 600px;
            border: 1px solid #000;
            position: relative;
        }
        .player {
            width: 20px;
            height: 20px;
            background-color: red;
            position: absolute;
            top: 290px;
            left: 290px;
        }
    </style>
</head>
<body>
    <h1>Game Board</h1>
    <div id="game-board">
        <div class="player" id="player"></div>
    </div>
    <script>
        let player = document.getElementById('player');
        let gameBoard = document.getElementById('game-board');

        // 속도와 방향 정의
        const speed = 2;
        // 해당 방향으로 키가 눌려 있으면 true, 그렇지 않으면 false
        const directions = {
            ArrowUp: false,
            ArrowDown: false,
            ArrowLeft: false,
            ArrowRight: false
        };

        function movePlayer() {
            let top = parseFloat(player.style.top);
            let left = parseFloat(player.style.left);

            // 대각선 이동을 처리하기 위해 각 방향의 이동량 계산
            let moveX = 0;
            let moveY = 0;
            if (directions.ArrowUp) moveY -= speed;
            if (directions.ArrowDown) moveY += speed;
            if (directions.ArrowLeft) moveX -= speed;
            if (directions.ArrowRight) moveX += speed;

            // 새로운 위치 계산
            let newTop = top + moveY;
            let newLeft = left + moveX;

            // 경계 조건 체크 (격자 밖으로 벗어나지 않도록)
            newTop = Math.max(0, Math.min(newTop, gameBoard.clientHeight - player.clientHeight));
            newLeft = Math.max(0, Math.min(newLeft, gameBoard.clientWidth - player.clientWidth));

            // 위치 업데이트
            player.style.top = newTop + 'px';
            player.style.left = newLeft + 'px';

            requestAnimationFrame(movePlayer);
        }

        document.addEventListener('DOMContentLoaded', (event) => {
            // 키 다운 이벤트
            document.addEventListener('keydown', (event) => {
                if (event.key in directions) {
                    directions[event.key] = true;
                }
            });

            // 키 업 이벤트
            document.addEventListener('keyup', (event) => {
                if (event.key in directions) {
                    directions[event.key] = false;
                }
            });
        });

        // 초기 위치 설정 및 애니메이션 시작
        player.style.top = '290px';
        player.style.left = '290px';
        movePlayer();
    </script>
</body>
</html>
